<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>S.I.S.M.I. - Terminale Operativo</title>
    <style>
        body { background-color: #0a0a0a; color: #00ff41; font-family: 'Courier New', Courier, monospace; padding: 20px; text-transform: uppercase; overflow-x: hidden; }
        .container { border: 2px solid #00ff41; padding: 20px; box-shadow: 0 0 15px rgba(0, 255, 65, 0.2); }
        h1, h2 { text-align: center; border-bottom: 1px solid #00ff41; padding-bottom: 10px; }
        .admin-panel { background: #111; border: 1px dashed #00ff41; padding: 15px; margin-bottom: 20px; }
        input, textarea, select { background: #000; border: 1px solid #00ff41; color: #00ff41; padding: 10px; margin: 5px 0; width: 100%; box-sizing: border-box; font-family: 'Courier New', monospace; }
        button { background: #00ff41; color: #000; border: none; padding: 12px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        button.delete-btn { background: #aa0000; color: #fff; width: auto; padding: 5px 10px; font-size: 11px; }
        .op-card { border: 1px solid #00ff41; padding: 15px; margin: 15px 0; background: rgba(0, 255, 65, 0.03); }
        .op-image { display: block; max-width: 100%; max-height: 400px; margin-top: 10px; border: 1px solid #00ff41; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #00ff41; padding: 10px; text-align: left; }
        .editable-cell { background: rgba(0, 255, 65, 0.1); outline: none; }
        .danger-high { color: #ff0000; }
        .danger-med { color: #ffaa00; }
        #login-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 90vh; }
        #main-terminal { display: none; }
    </style>
</head>
<body>

<div id="login-screen">
    <div style="border: 2px solid #00ff41; padding: 40px; background: rgba(0, 255, 65, 0.05); text-align: center; max-width: 400px;">
        <h1>S.I.S.M.I.</h1>
        <p>IDENTIFICAZIONE RICHIESTA</p>
        <input type="text" id="discord-user" placeholder="NOME DISCORD">
        <input type="password" id="role-code" placeholder="ID RUOLO SERVIZI">
        <button onclick="checkAccess()">LOG IN</button>
        <p id="login-error" style="color: red; display: none; margin-top: 15px;">ERRORE: ACCESSO NEGATO</p>
    </div>
</div>

<div id="main-terminal">
    <div class="container">
        <p style="text-align: right;">OPERATORE: <span id="active-user"></span> | STATO: ONLINE</p>
        <h1>DATABASE OPERATIVO</h1>
        <div class="section">
            <h2>--- OPERAZIONI ---</h2>
            <div class="admin-panel">
                <input type="text" id="op-name" placeholder="NOME OPERAZIONE">
                <textarea id="op-desc" placeholder="DESCRIZIONE"></textarea>
                <input type="text" id="op-img-url" placeholder="URL IMMAGINE">
                <button onclick="addOp()">ARCHIVIA OPERAZIONE</button>
            </div>
            <div id="op-list"></div>
        </div>
        <div class="section">
            <h2>--- CITTADINI ---</h2>
            <div class="admin-panel">
                <input type="text" id="cit-name" placeholder="NOME CITTADINO">
                <select id="cit-status">
                    <option value="Bassa">BASSA</option>
                    <option value="Media">MEDIA</option>
                    <option value="Alta">ALTA</option>
                </select>
                <button onclick="addCit()">AGGIUNGI SCHEDA</button>
            </div>
            <table>
                <thead><tr><th>NOME (MOD.)</th><th>STATO (MOD.)</th><th>NOTE (MOD.)</th><th>AZIONI</th></tr></thead>
                <tbody id="cit-table"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const CODICE = "1466703569586618473";
    function checkAccess() {
        const user = document.getElementById('discord-user').value;
        const code = document.getElementById('role-code').value.trim();
        if (code === CODICE && user !== "") {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-terminal').style.display = 'block';
            document.getElementById('active-user').innerText = user.toUpperCase();
        } else {
            document.getElementById('login-error').style.display = 'block';
            setTimeout(() => { document.getElementById('login-error').style.display = 'none'; }, 3000);
        }
    }
    function addOp() {
        const name = document.getElementById('op-name').value;
        const desc = document.getElementById('op-desc').value;
        const imgUrl = document.getElementById('op-img-url').value.trim();
        if(name && desc) {
            const div = document.createElement('div');
            div.className = 'op-card';
            let imgHtml = imgUrl ? `<img src="${imgUrl}" class="op-image" onerror="this.style.display='none'">` : '';
            div.innerHTML = `<h3>OP: ${name}</h3><p style="white-space: pre-wrap;">${desc}</p>${imgHtml}<br><button class="delete-btn" onclick="this.parentElement.remove()">ELIMINA</button>`;
            document.getElementById('op-list').prepend(div);
            document.getElementById('op-name').value = ''; document.getElementById('op-desc').value = ''; document.getElementById('op-img-url').value = '';
        }
    }
    function addCit() {
        const name = document.getElementById('cit-name').value;
        const status = document.getElementById('cit-status').value;
        if(name) {
            const row = document.getElementById('cit-table').insertRow(0);
            let color = status === 'Alta' ? 'danger-high' : (status === 'Media' ? 'danger-med' : '');
            row.innerHTML = `<td class="editable-cell" contenteditable="true">${name}</td><td class="editable-cell ${color}" contenteditable="true">${status.toUpperCase()}</td><td class="editable-cell" contenteditable="true">NOTE...</td><td><button class="delete-btn" onclick="this.parentElement.parentElement.remove()">X</button></td>`;
            document.getElementById('cit-name').value = '';
        }
    }
</script>
</body>
</html>
